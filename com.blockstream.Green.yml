app-id: com.blockstream.Green
runtime: org.kde.Platform
runtime-version: '6.9'
sdk: org.kde.Sdk
command: blockstream
rename-desktop-file: blockstream.desktop
rename-icon: linux_production

finish-args:
  - --share=network
  - --socket=fallback-x11
  - --socket=wayland
  - --share=ipc
  - --device=all

modules: 
  - name: green
    buildsystem: simple
    build-commands:
      - install -D blockstream ${FLATPAK_DEST}/bin/blockstream
      - desktop-file-install --dir ${FLATPAK_DEST}/share/applications blockstream.desktop 
      - install -Dm644 linux_production.png ${FLATPAK_DEST}/share/icons/hicolor/512x512/apps/linux_production.png
      - install -Dm644 com.blockstream.Green.metainfo.xml ${FLATPAK_DEST}/share/metainfo/com.blockstream.Green.metainfo.xml

    sources:
      - type: archive
        url: https://github.com/Blockstream/green_qt/releases/download/release_2.0.28/Blockstream-linux-x86_64.tar.gz 
        sha256: 29ec28d3ae308b2da3311aaba8ffbe6b2fb3ada1f59a368ae22f8cee3b9fa9b1
        strip-components: 0

      - type: file
        url: https://github.com/Blockstream/green_qt/raw/release_2.0.28/assets/icons/linux_production.png
        sha256: 470ede780a248b38161ef0ffdb2a4a87efb6aedcdf8a1cfe17b3b2cf32275bce

      - type: file
        url: https://github.com/Blockstream/green_qt/raw/release_2.0.28/blockstream.desktop
        sha256: c8180ffdedaea497fa3103f974c66dfbf60a471c3f1692f21b6a8c61f4807f72

      - type: file
        path: com.blockstream.Green.metainfo.xml
